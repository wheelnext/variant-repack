[metadata_configs]
[metadata_configs.default]
normalize_package_name = false
normalize_version = true
deps_remove_list = [
  "nvidia-cuda-nvrtc-cu12",
  "nvidia-cuda-runtime-cu12",
  "nvidia-cuda-cupti-cu12",
  "nvidia-cudnn-cu12",
  "nvidia-cublas-cu12",
  "nvidia-cufft-cu12",
  "nvidia-curand-cu12",
  "nvidia-cusolver-cu12",
  "nvidia-cusparse-cu12",
  "nvidia-cusparselt-cu12",
  "nvidia-nccl-cu12",
  "nvidia-nvshmem-cu12",
  "nvidia-nvtx-cu12",
  "nvidia-nvjitlink-cu12",
  "nvidia-cufile-cu12",
  "triton"
]
deps_add_list    = [
    # Common to all CUDA Variants
    'triton==3.4.0; platform_system == "Linux" and "nvidia" in variant_namespaces',
    'nvidia-cudnn==9.10.2.21; platform_system == "Linux" and platform_machine == "x86_64" and "nvidia" in variant_namespaces',
    'nvidia-cusparselt==0.7.1; platform_system == "Linux" and platform_machine == "x86_64" and "nvidia" in variant_namespaces',
    'nvidia-nccl==2.27.3; platform_system == "Linux" and platform_machine == "x86_64" and "nvidia" in variant_namespaces',

    # CUDA 12.6
    'nvidia-cuda-nvrtc==12.6.77; platform_system == "Linux" and platform_machine == "x86_64" and "nvidia :: cuda_version_lower_bound :: 12.6" in variant_properties and "nvidia :: cuda_version_lower_bound :: 12.8" not in variant_properties and "nvidia :: cuda_version_lower_bound :: 12.9" not in variant_properties',
    'nvidia-cuda-runtime==12.6.77; platform_system == "Linux" and platform_machine == "x86_64" and "nvidia :: cuda_version_lower_bound :: 12.6" in variant_properties and "nvidia :: cuda_version_lower_bound :: 12.8" not in variant_properties and "nvidia :: cuda_version_lower_bound :: 12.9" not in variant_properties',
    'nvidia-cuda-cupti==12.6.80; platform_system == "Linux" and platform_machine == "x86_64" and "nvidia :: cuda_version_lower_bound :: 12.6" in variant_properties and "nvidia :: cuda_version_lower_bound :: 12.8" not in variant_properties and "nvidia :: cuda_version_lower_bound :: 12.9" not in variant_properties',
    'nvidia-cublas==12.6.4.1; platform_system == "Linux" and platform_machine == "x86_64" and "nvidia :: cuda_version_lower_bound :: 12.6" in variant_properties and "nvidia :: cuda_version_lower_bound :: 12.8" not in variant_properties and "nvidia :: cuda_version_lower_bound :: 12.9" not in variant_properties',
    'nvidia-cufft==11.3.0.4; platform_system == "Linux" and platform_machine == "x86_64" and "nvidia :: cuda_version_lower_bound :: 12.6" in variant_properties and "nvidia :: cuda_version_lower_bound :: 12.8" not in variant_properties and "nvidia :: cuda_version_lower_bound :: 12.9" not in variant_properties',
    'nvidia-curand==10.3.7.77; platform_system == "Linux" and platform_machine == "x86_64" and "nvidia :: cuda_version_lower_bound :: 12.6" in variant_properties and "nvidia :: cuda_version_lower_bound :: 12.8" not in variant_properties and "nvidia :: cuda_version_lower_bound :: 12.9" not in variant_properties',
    'nvidia-cusolver==11.7.1.2; platform_system == "Linux" and platform_machine == "x86_64" and "nvidia :: cuda_version_lower_bound :: 12.6" in variant_properties and "nvidia :: cuda_version_lower_bound :: 12.8" not in variant_properties and "nvidia :: cuda_version_lower_bound :: 12.9" not in variant_properties',
    'nvidia-cusparse==12.5.4.2; platform_system == "Linux" and platform_machine == "x86_64" and "nvidia :: cuda_version_lower_bound :: 12.6" in variant_properties and "nvidia :: cuda_version_lower_bound :: 12.8" not in variant_properties and "nvidia :: cuda_version_lower_bound :: 12.9" not in variant_properties',
    'nvidia-nvshmem==3.2.5; platform_system == "Linux" and platform_machine == "x86_64" and "nvidia :: cuda_version_lower_bound :: 12.6" in variant_properties and "nvidia :: cuda_version_lower_bound :: 12.8" not in variant_properties and "nvidia :: cuda_version_lower_bound :: 12.9" not in variant_properties',
    'nvidia-nvtx==12.6.77; platform_system == "Linux" and platform_machine == "x86_64" and "nvidia :: cuda_version_lower_bound :: 12.6" in variant_properties and "nvidia :: cuda_version_lower_bound :: 12.8" not in variant_properties and "nvidia :: cuda_version_lower_bound :: 12.9" not in variant_properties',
    'nvidia-nvjitlink==12.6.85; platform_system == "Linux" and platform_machine == "x86_64" and "nvidia :: cuda_version_lower_bound :: 12.6" in variant_properties and "nvidia :: cuda_version_lower_bound :: 12.8" not in variant_properties and "nvidia :: cuda_version_lower_bound :: 12.9" not in variant_properties',
    'nvidia-cufile==1.11.1.6; platform_system == "Linux" and platform_machine == "x86_64" and "nvidia :: cuda_version_lower_bound :: 12.6" in variant_properties and "nvidia :: cuda_version_lower_bound :: 12.8" not in variant_properties and "nvidia :: cuda_version_lower_bound :: 12.9" not in variant_properties',

    # CUDA 12.8
    'nvidia-cuda-nvrtc==12.8.93; platform_system == "Linux" and platform_machine == "x86_64" and "nvidia :: cuda_version_lower_bound :: 12.6" not in variant_properties and "nvidia :: cuda_version_lower_bound :: 12.8" in variant_properties and "nvidia :: cuda_version_lower_bound :: 12.9" not in variant_properties',
    'nvidia-cuda-runtime==12.8.90; platform_system == "Linux" and platform_machine == "x86_64" and "nvidia :: cuda_version_lower_bound :: 12.6" not in variant_properties and "nvidia :: cuda_version_lower_bound :: 12.8" in variant_properties and "nvidia :: cuda_version_lower_bound :: 12.9" not in variant_properties',
    'nvidia-cuda-cupti==12.8.90; platform_system == "Linux" and platform_machine == "x86_64" and "nvidia :: cuda_version_lower_bound :: 12.6" not in variant_properties and "nvidia :: cuda_version_lower_bound :: 12.8" in variant_properties and "nvidia :: cuda_version_lower_bound :: 12.9" not in variant_properties',
    'nvidia-cublas==12.8.4.1; platform_system == "Linux" and platform_machine == "x86_64" and "nvidia :: cuda_version_lower_bound :: 12.6" not in variant_properties and "nvidia :: cuda_version_lower_bound :: 12.8" in variant_properties and "nvidia :: cuda_version_lower_bound :: 12.9" not in variant_properties',
    'nvidia-cufft==11.3.3.83; platform_system == "Linux" and platform_machine == "x86_64" and "nvidia :: cuda_version_lower_bound :: 12.6" not in variant_properties and "nvidia :: cuda_version_lower_bound :: 12.8" in variant_properties and "nvidia :: cuda_version_lower_bound :: 12.9" not in variant_properties',
    'nvidia-curand==10.3.9.90; platform_system == "Linux" and platform_machine == "x86_64" and "nvidia :: cuda_version_lower_bound :: 12.6" not in variant_properties and "nvidia :: cuda_version_lower_bound :: 12.8" in variant_properties and "nvidia :: cuda_version_lower_bound :: 12.9" not in variant_properties',
    'nvidia-cusolver==11.7.3.90; platform_system == "Linux" and platform_machine == "x86_64" and "nvidia :: cuda_version_lower_bound :: 12.6" not in variant_properties and "nvidia :: cuda_version_lower_bound :: 12.8" in variant_properties and "nvidia :: cuda_version_lower_bound :: 12.9" not in variant_properties',
    'nvidia-cusparse==12.5.8.93; platform_system == "Linux" and platform_machine == "x86_64" and "nvidia :: cuda_version_lower_bound :: 12.6" not in variant_properties and "nvidia :: cuda_version_lower_bound :: 12.8" in variant_properties and "nvidia :: cuda_version_lower_bound :: 12.9" not in variant_properties',
    'nvidia-nvshmem==3.2.5; platform_system == "Linux" and platform_machine == "x86_64" and "nvidia :: cuda_version_lower_bound :: 12.6" not in variant_properties and "nvidia :: cuda_version_lower_bound :: 12.8" in variant_properties and "nvidia :: cuda_version_lower_bound :: 12.9" not in variant_properties',
    'nvidia-nvtx==12.8.90; platform_system == "Linux" and platform_machine == "x86_64" and "nvidia :: cuda_version_lower_bound :: 12.6" not in variant_properties and "nvidia :: cuda_version_lower_bound :: 12.8" in variant_properties and "nvidia :: cuda_version_lower_bound :: 12.9" not in variant_properties',
    'nvidia-nvjitlink==12.8.93; platform_system == "Linux" and platform_machine == "x86_64" and "nvidia :: cuda_version_lower_bound :: 12.6" not in variant_properties and "nvidia :: cuda_version_lower_bound :: 12.8" in variant_properties and "nvidia :: cuda_version_lower_bound :: 12.9" not in variant_properties',
    'nvidia-cufile==1.13.1.3; platform_system == "Linux" and platform_machine == "x86_64" and "nvidia :: cuda_version_lower_bound :: 12.6" not in variant_properties and "nvidia :: cuda_version_lower_bound :: 12.8" in variant_properties and "nvidia :: cuda_version_lower_bound :: 12.9" not in variant_properties',

    # CUDA 12.9
    'nvidia-cuda-nvrtc==12.9.86; platform_system == "Linux" and platform_machine == "x86_64" and "nvidia :: cuda_version_lower_bound :: 12.6" not in variant_properties and "nvidia :: cuda_version_lower_bound :: 12.8" not in variant_properties and "nvidia :: cuda_version_lower_bound :: 12.9" in variant_properties',
    'nvidia-cuda-runtime==12.9.79; platform_system == "Linux" and platform_machine == "x86_64" and "nvidia :: cuda_version_lower_bound :: 12.6" not in variant_properties and "nvidia :: cuda_version_lower_bound :: 12.8" not in variant_properties and "nvidia :: cuda_version_lower_bound :: 12.9" in variant_properties',
    'nvidia-cuda-cupti==12.9.79; platform_system == "Linux" and platform_machine == "x86_64" and "nvidia :: cuda_version_lower_bound :: 12.6" not in variant_properties and "nvidia :: cuda_version_lower_bound :: 12.8" not in variant_properties and "nvidia :: cuda_version_lower_bound :: 12.9" in variant_properties',
    'nvidia-cublas==12.9.1.4; platform_system == "Linux" and platform_machine == "x86_64" and "nvidia :: cuda_version_lower_bound :: 12.6" not in variant_properties and "nvidia :: cuda_version_lower_bound :: 12.8" not in variant_properties and "nvidia :: cuda_version_lower_bound :: 12.9" in variant_properties',
    'nvidia-cufft==11.4.1.4; platform_system == "Linux" and platform_machine == "x86_64" and "nvidia :: cuda_version_lower_bound :: 12.6" not in variant_properties and "nvidia :: cuda_version_lower_bound :: 12.8" not in variant_properties and "nvidia :: cuda_version_lower_bound :: 12.9" in variant_properties',
    'nvidia-curand==10.3.10.19; platform_system == "Linux" and platform_machine == "x86_64" and "nvidia :: cuda_version_lower_bound :: 12.6" not in variant_properties and "nvidia :: cuda_version_lower_bound :: 12.8" not in variant_properties and "nvidia :: cuda_version_lower_bound :: 12.9" in variant_properties',
    'nvidia-cusolver==11.7.5.82; platform_system == "Linux" and platform_machine == "x86_64" and "nvidia :: cuda_version_lower_bound :: 12.6" not in variant_properties and "nvidia :: cuda_version_lower_bound :: 12.8" not in variant_properties and "nvidia :: cuda_version_lower_bound :: 12.9" in variant_properties',
    'nvidia-cusparse==12.5.10.65; platform_system == "Linux" and platform_machine == "x86_64" and "nvidia :: cuda_version_lower_bound :: 12.6" not in variant_properties and "nvidia :: cuda_version_lower_bound :: 12.8" not in variant_properties and "nvidia :: cuda_version_lower_bound :: 12.9" in variant_properties',
    'nvidia-nvtx==12.9.79; platform_system == "Linux" and platform_machine == "x86_64" and "nvidia :: cuda_version_lower_bound :: 12.6" not in variant_properties and "nvidia :: cuda_version_lower_bound :: 12.8" not in variant_properties and "nvidia :: cuda_version_lower_bound :: 12.9" in variant_properties',
    'nvidia-nvjitlink==12.9.86; platform_system == "Linux" and platform_machine == "x86_64" and "nvidia :: cuda_version_lower_bound :: 12.6" not in variant_properties and "nvidia :: cuda_version_lower_bound :: 12.8" not in variant_properties and "nvidia :: cuda_version_lower_bound :: 12.9" in variant_properties',
    'nvidia-cufile==1.14.1.1; platform_system == "Linux" and platform_machine == "x86_64" and "nvidia :: cuda_version_lower_bound :: 12.6" not in variant_properties and "nvidia :: cuda_version_lower_bound :: 12.8" not in variant_properties and "nvidia :: cuda_version_lower_bound :: 12.9" in variant_properties',
]

# PyT CUDA `sm_archs`: https://github.com/pytorch/pytorch/blob/v2.8.0-rc3/.ci/magma/Makefile

[variant_configs]
[variant_configs.cu126]
variant_label = "cu126"  # [a-z0-9_]{1,8} 
properties = [
  { namespace = "nvidia", feature = "cuda_version_lower_bound", value = "12.6" },
  { namespace = "nvidia", feature = "sm_arch", value = "50_real" },
  { namespace = "nvidia", feature = "sm_arch", value = "60_real" },
  { namespace = "nvidia", feature = "sm_arch", value = "70_real" },
  { namespace = "nvidia", feature = "sm_arch", value = "75_real" },
  { namespace = "nvidia", feature = "sm_arch", value = "80_real" },
  { namespace = "nvidia", feature = "sm_arch", value = "86_real" },
  { namespace = "nvidia", feature = "sm_arch", value = "90_real" },
]

[variant_configs.cu128]
variant_label = "cu128"  # [a-z0-9_]{1,8} 
properties = [
  { namespace = "nvidia", feature = "cuda_version_lower_bound", value = "12.8" },
  { namespace = "nvidia", feature = "sm_arch", value = "75_real" },
  { namespace = "nvidia", feature = "sm_arch", value = "80_real" },
  { namespace = "nvidia", feature = "sm_arch", value = "86_real" },
  { namespace = "nvidia", feature = "sm_arch", value = "90_real" },
  { namespace = "nvidia", feature = "sm_arch", value = "100_real" },
  { namespace = "nvidia", feature = "sm_arch", value = "120_real" },
]

[variant_configs.cu129]
variant_label = "cu129"  # [a-z0-9_]{1,8} 
properties = [
  { namespace = "nvidia", feature = "cuda_version_lower_bound", value = "12.9" },
  { namespace = "nvidia", feature = "sm_arch", value = "75_real" },
  { namespace = "nvidia", feature = "sm_arch", value = "80_real" },
  { namespace = "nvidia", feature = "sm_arch", value = "86_real" },
  { namespace = "nvidia", feature = "sm_arch", value = "90_real" },
  { namespace = "nvidia", feature = "sm_arch", value = "100_real" },
  { namespace = "nvidia", feature = "sm_arch", value = "120_real" },
  { namespace = "nvidia", feature = "sm_arch", value = "120_virtual" },
]

[variant_configs.cpu]
# variant_label = None  # FORBIDDEN - No Alias -> NULL VARIANT: `00000000`
properties = []